<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–±–æ—Ä—â–∏–∫ –§–∏–ª—å–º–æ–≤ - –†–µ—Ç—Ä–æ –ú–∞–≥–∞–∑–∏–Ω</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(to bottom, #2c1810 0%, #1a0f08 100%);
            color: #f5e6d3;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            border: 4px solid #d4af37;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .header h1 {
            font-size: 2.5em;
            color: #ffd700;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 15px;
        }

        .stat-box {
            background: rgba(0,0,0,0.4);
            padding: 10px 20px;
            border-radius: 5px;
            border: 2px solid #d4af37;
        }

        .stat-label {
            font-size: 0.9em;
            color: #ccc;
        }

        .stat-value {
            font-size: 1.5em;
            color: #ffd700;
            font-weight: bold;
        }

        .game-area {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .customer-panel {
            background: linear-gradient(135deg, #3d2817 0%, #2c1810 100%);
            border: 3px solid #8b4513;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .customer {
            background: rgba(139, 69, 19, 0.3);
            border: 2px solid #d4af37;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .customer-avatar {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
        }

        .customer-request {
            background: rgba(0,0,0,0.4);
            padding: 10px;
            border-radius: 5px;
            font-style: italic;
            color: #ffd700;
            margin-top: 10px;
        }

        .shelves-area {
            background: linear-gradient(135deg, #4a2c1a 0%, #3d2817 100%);
            border: 3px solid #8b4513;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .shelves {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .movie-spine {
            height: 200px;
            width: 60px;
            border: 2px solid #000;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.6);
        }

        .movie-spine:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 8px 20px rgba(255,215,0,0.4);
        }

        .movie-spine.selected {
            transform: translateY(-15px) scale(1.1);
            box-shadow: 0 10px 30px rgba(255,215,0,0.7);
            border: 3px solid #ffd700;
        }

        .spine-label {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            font-size: 10px;
            padding: 5px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            font-weight: bold;
        }

        .genre-action { background: linear-gradient(to bottom, #c41e3a 0%, #8b0000 100%); }
        .genre-comedy { background: linear-gradient(to bottom, #ffd700 0%, #ff8c00 100%); }
        .genre-drama { background: linear-gradient(to bottom, #4169e1 0%, #000080 100%); }
        .genre-horror { background: linear-gradient(to bottom, #2f4f4f 0%, #000000 100%); }
        .genre-scifi { background: linear-gradient(to bottom, #9370db 0%, #4b0082 100%); }
        .genre-romance { background: linear-gradient(to bottom, #ff69b4 0%, #c71585 100%); }

        .movie-info-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2c1810 0%, #1a0f08 100%);
            border: 4px solid #d4af37;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            z-index: 1000;
            box-shadow: 0 10px 50px rgba(0,0,0,0.9);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 999;
        }

        .movie-title {
            font-size: 1.8em;
            color: #ffd700;
            margin-bottom: 15px;
        }

        .movie-details {
            margin: 15px 0;
        }

        .movie-detail-row {
            margin: 10px 0;
            padding: 8px;
            background: rgba(139, 69, 19, 0.2);
            border-radius: 5px;
        }

        .detail-label {
            color: #d4af37;
            font-weight: bold;
            margin-right: 10px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
        }

        .btn-recommend {
            background: linear-gradient(135deg, #228b22 0%, #006400 100%);
            color: white;
            border: 2px solid #32cd32;
        }

        .btn-recommend:hover {
            background: linear-gradient(135deg, #32cd32 0%, #228b22 100%);
            transform: scale(1.05);
        }

        .btn-close {
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            color: white;
            border: 2px solid #d4af37;
        }

        .btn-close:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: scale(1.05);
        }

        .feedback-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2c1810 0%, #1a0f08 100%);
            border: 4px solid #d4af37;
            border-radius: 15px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            z-index: 1001;
            text-align: center;
            box-shadow: 0 10px 50px rgba(0,0,0,0.9);
        }

        .feedback-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .feedback-text {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .day-complete-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a472a 0%, #0f2419 100%);
            border: 5px solid #ffd700;
            border-radius: 20px;
            padding: 50px;
            max-width: 700px;
            width: 90%;
            z-index: 1002;
            text-align: center;
            box-shadow: 0 15px 60px rgba(0,0,0,0.95);
        }

        .day-complete-title {
            font-size: 2.5em;
            color: #ffd700;
            margin-bottom: 30px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        }

        .purchase-area {
            margin: 30px 0;
        }

        .purchase-movies {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .purchase-movie {
            background: rgba(139, 69, 19, 0.3);
            border: 2px solid #d4af37;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .purchase-movie:hover {
            background: rgba(139, 69, 19, 0.5);
            transform: scale(1.05);
        }

        .purchase-movie.selected {
            background: rgba(34, 139, 34, 0.5);
            border-color: #32cd32;
        }

        .purchase-movie-title {
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 5px;
            color: #ffd700;
        }

        .purchase-movie-info {
            font-size: 0.75em;
            color: #ccc;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 30px;
            height: 15px;
            border: 1px solid #000;
            border-radius: 3px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pulse {
            animation: pulse 0.5s;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
        const MOVIES_DATABASE = [
            // –ë–æ–µ–≤–∏–∫–∏
            { id: 1, title: "–ú–∞—Ç—Ä–∏—Ü–∞", year: 1999, genre: "action", director: "–í–∞—á–æ–≤—Å–∫–∏", rating: 8.7, format: "DVD" },
            { id: 2, title: "–¢–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä 2", year: 1991, genre: "action", director: "–î–∂–µ–π–º—Å –ö—ç–º–µ—Ä–æ–Ω", rating: 8.6, format: "VHS" },
            { id: 3, title: "–ö—Ä–µ–ø–∫–∏–π –æ—Ä–µ—à–µ–∫", year: 1988, genre: "action", director: "–î–∂–æ–Ω –ú–∞–∫—Ç–∏—Ä–Ω–∞–Ω", rating: 8.2, format: "DVD" },
            { id: 4, title: "–ë–µ–∑—É–º–Ω—ã–π –ú–∞–∫—Å", year: 1979, genre: "action", director: "–î–∂–æ—Ä–¥–∂ –ú–∏–ª–ª–µ—Ä", rating: 8.1, format: "VHS" },
            { id: 5, title: "–î–∂–æ–Ω –£–∏–∫", year: 2014, genre: "action", director: "–ß–∞–¥ –°—Ç–∞—Ö–µ–ª—Å–∫–∏", rating: 7.4, format: "DVD" },
            { id: 6, title: "–†–µ–π–¥", year: 2011, genre: "action", director: "–ì–∞—Ä–µ—Ç –≠–≤–∞–Ω—Å", rating: 7.6, format: "DVD" },
            { id: 7, title: "–ì–ª–∞–¥–∏–∞—Ç–æ—Ä", year: 2000, genre: "action", director: "–†–∏–¥–ª–∏ –°–∫–æ—Ç—Ç", rating: 8.5, format: "DVD" },
            { id: 8, title: "–ò–Ω–¥–∏–∞–Ω–∞ –î–∂–æ–Ω—Å", year: 1981, genre: "action", director: "–°—Ç–∏–≤–µ–Ω –°–ø–∏–ª–±–µ—Ä–≥", rating: 8.4, format: "VHS" },
            
            // –ö–æ–º–µ–¥–∏–∏
            { id: 9, title: "–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ", year: 1985, genre: "comedy", director: "–†–æ–±–µ—Ä—Ç –ó–µ–º–µ–∫–∏—Å", rating: 8.5, format: "VHS" },
            { id: 10, title: "–ú–∞—Å–∫–∞", year: 1994, genre: "comedy", director: "–ß–∞–∫ –†–∞—Å—Å–µ–ª–ª", rating: 6.9, format: "VHS" },
            { id: 11, title: "–¢—É–ø–æ–π –∏ –µ—â–µ —Ç—É–ø–µ–µ", year: 1994, genre: "comedy", director: "–ü–∏—Ç–µ—Ä –§–∞—Ä—Ä–µ–ª–ª–∏", rating: 7.3, format: "DVD" },
            { id: 12, title: "–û—Ö–æ—Ç–Ω–∏–∫–∏ –∑–∞ –ø—Ä–∏–≤–∏–¥–µ–Ω–∏—è–º–∏", year: 1984, genre: "comedy", director: "–ê–π–≤–∞–Ω –†–∞–π—Ç–º–∞–Ω", rating: 7.8, format: "VHS" },
            { id: 13, title: "–≠–π—Å –í–µ–Ω—Ç—É—Ä–∞", year: 1994, genre: "comedy", director: "–¢–æ–º –®–µ–¥—å—è–∫", rating: 6.9, format: "VHS" },
            { id: 14, title: "–ê—Å—Ç–µ—Ä–∏–∫—Å –∏ –û–±–µ–ª–∏–∫—Å", year: 1999, genre: "comedy", director: "–ö–ª–æ–¥ –ó–∏–¥–∏", rating: 5.9, format: "DVD" },
            { id: 15, title: "–ë–æ–ª—å—à–æ–π –õ–µ–±–æ–≤—Å–∫–∏", year: 1998, genre: "comedy", director: "–ö–æ—ç–Ω—ã", rating: 8.1, format: "DVD" },
            { id: 16, title: "–ú–µ—Å—Ç—å –±–æ—Ç–∞–Ω–æ–≤", year: 1984, genre: "comedy", director: "–î–∂–µ—Ñ—Ñ –ö—ç–Ω—å—é", rating: 6.6, format: "VHS" },

            // –î—Ä–∞–º—ã
            { id: 17, title: "–ó–µ–ª–µ–Ω–∞—è –º–∏–ª—è", year: 1999, genre: "drama", director: "–§—Ä—ç–Ω–∫ –î–∞—Ä–∞–±–æ–Ω—Ç", rating: 8.6, format: "DVD" },
            { id: 18, title: "–ü–æ–±–µ–≥ –∏–∑ –®–æ—É—à–µ–Ω–∫–∞", year: 1994, genre: "drama", director: "–§—Ä—ç–Ω–∫ –î–∞—Ä–∞–±–æ–Ω—Ç", rating: 9.3, format: "VHS" },
            { id: 19, title: "–§–æ—Ä—Ä–µ—Å—Ç –ì–∞–º–ø", year: 1994, genre: "drama", director: "–†–æ–±–µ—Ä—Ç –ó–µ–º–µ–∫–∏—Å", rating: 8.8, format: "VHS" },
            { id: 20, title: "–°–ø–∏—Å–æ–∫ –®–∏–Ω–¥–ª–µ—Ä–∞", year: 1993, genre: "drama", director: "–°—Ç–∏–≤–µ–Ω –°–ø–∏–ª–±–µ—Ä–≥", rating: 9.0, format: "VHS" },
            { id: 21, title: "–ö—Ä–µ—Å—Ç–Ω—ã–π –æ—Ç–µ—Ü", year: 1972, genre: "drama", director: "–§—Ä—ç–Ω—Å–∏—Å –ö–æ–ø–ø–æ–ª–∞", rating: 9.2, format: "VHS" },
            { id: 22, title: "–°–ª–∞–≤–Ω—ã–µ –ø–∞—Ä–Ω–∏", year: 1990, genre: "drama", director: "–ú–∞—Ä—Ç–∏–Ω –°–∫–æ—Ä—Å–µ–∑–µ", rating: 8.7, format: "VHS" },
            { id: 23, title: "–û–¥–Ω–∞–∂–¥—ã –≤ –ê–º–µ—Ä–∏–∫–µ", year: 1984, genre: "drama", director: "–°–µ—Ä–¥–∂–æ –õ–µ–æ–Ω–µ", rating: 8.3, format: "VHS" },
            { id: 24, title: "–¢–∞–∫—Å–∏—Å—Ç", year: 1976, genre: "drama", director: "–ú–∞—Ä—Ç–∏–Ω –°–∫–æ—Ä—Å–µ–∑–µ", rating: 8.2, format: "VHS" },

            // –•–æ—Ä—Ä–æ—Ä—ã
            { id: 25, title: "–°–∏—è–Ω–∏–µ", year: 1980, genre: "horror", director: "–°—Ç—ç–Ω–ª–∏ –ö—É–±—Ä–∏–∫", rating: 8.4, format: "VHS" },
            { id: 26, title: "–ß—É–∂–æ–π", year: 1979, genre: "horror", director: "–†–∏–¥–ª–∏ –°–∫–æ—Ç—Ç", rating: 8.5, format: "VHS" },
            { id: 27, title: "–ö–æ—à–º–∞—Ä –Ω–∞ —É–ª–∏—Ü–µ –í—è–∑–æ–≤", year: 1984, genre: "horror", director: "–£—ç—Å –ö—Ä—ç–π–≤–µ–Ω", rating: 7.4, format: "VHS" },
            { id: 28, title: "–ü—è—Ç–Ω–∏—Ü–∞ 13-–µ", year: 1980, genre: "horror", director: "–®–æ–Ω –ö–∞–Ω–Ω–∏–Ω–≥–µ–º", rating: 6.4, format: "VHS" },
            { id: 29, title: "–•—ç–ª–ª–æ—É–∏–Ω", year: 1978, genre: "horror", director: "–î–∂–æ–Ω –ö–∞—Ä–ø–µ–Ω—Ç–µ—Ä", rating: 7.7, format: "VHS" },
            { id: 30, title: "–ó–≤–æ–Ω–æ–∫", year: 2002, genre: "horror", director: "–ì–æ—Ä –í–µ—Ä–±–∏–Ω—Å–∫–∏", rating: 7.1, format: "DVD" },
            { id: 31, title: "–ú–æ–ª—á–∞–Ω–∏–µ —è–≥–Ω—è—Ç", year: 1991, genre: "horror", director: "–î–∂–æ–Ω–∞—Ç–∞–Ω –î–µ–º–º–µ", rating: 8.6, format: "VHS" },
            { id: 32, title: "–ò–∑–≥–æ–Ω—è—é—â–∏–π –¥—å—è–≤–æ–ª–∞", year: 1973, genre: "horror", director: "–£–∏–ª—å—è–º –§—Ä–∏–¥–∫–∏–Ω", rating: 8.1, format: "VHS" },

            // –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞
            { id: 33, title: "–ë–µ–≥—É—â–∏–π –ø–æ –ª–µ–∑–≤–∏—é", year: 1982, genre: "scifi", director: "–†–∏–¥–ª–∏ –°–∫–æ—Ç—Ç", rating: 8.1, format: "VHS" },
            { id: 34, title: "–ü—è—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç", year: 1997, genre: "scifi", director: "–õ—é–∫ –ë–µ—Å—Å–æ–Ω", rating: 7.6, format: "DVD" },
            { id: 35, title: "–ó–≤–µ–∑–¥–Ω—ã–µ –≤–æ–π–Ω—ã", year: 1977, genre: "scifi", director: "–î–∂–æ—Ä–¥–∂ –õ—É–∫–∞—Å", rating: 8.6, format: "VHS" },
            { id: 36, title: "2001: –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –æ–¥–∏—Å—Å–µ—è", year: 1968, genre: "scifi", director: "–°—Ç—ç–Ω–ª–∏ –ö—É–±—Ä–∏–∫", rating: 8.3, format: "VHS" },
            { id: 37, title: "–ù–∞–∑–∞–¥ –≤ –±—É–¥—É—â–µ–µ 2", year: 1989, genre: "scifi", director: "–†–æ–±–µ—Ä—Ç –ó–µ–º–µ–∫–∏—Å", rating: 7.8, format: "VHS" },
            { id: 38, title: "–í—Å–ø–æ–º–Ω–∏—Ç—å –≤—Å—ë", year: 1990, genre: "scifi", director: "–ü–æ–ª –í–µ—Ä—Ö—É–≤–µ–Ω", rating: 7.5, format: "VHS" },
            { id: 39, title: "12 –æ–±–µ–∑—å—è–Ω", year: 1995, genre: "scifi", director: "–¢–µ—Ä—Ä–∏ –ì–∏–ª–ª–∏–∞–º", rating: 8.0, format: "DVD" },
            { id: 40, title: "–¢—Ä–æ–Ω", year: 1982, genre: "scifi", director: "–°—Ç–∏–≤–µ–Ω –õ–∏—Å–±–µ—Ä–≥–µ—Ä", rating: 6.7, format: "VHS" },

            // –ú–µ–ª–æ–¥—Ä–∞–º—ã
            { id: 41, title: "–¢–∏—Ç–∞–Ω–∏–∫", year: 1997, genre: "romance", director: "–î–∂–µ–π–º—Å –ö—ç–º–µ—Ä–æ–Ω", rating: 7.9, format: "DVD" },
            { id: 42, title: "–ì—Ä—è–∑–Ω—ã–µ —Ç–∞–Ω—Ü—ã", year: 1987, genre: "romance", director: "–≠–º–∏–ª—å –ê—Ä–¥–æ–ª–∏–Ω–æ", rating: 7.1, format: "VHS" },
            { id: 43, title: "–ü—Ä–∏–≤–∏–¥–µ–Ω–∏–µ", year: 1990, genre: "romance", director: "–î–∂–µ—Ä—Ä–∏ –¶—É–∫–µ—Ä", rating: 7.1, format: "VHS" },
            { id: 44, title: "–ö—Ä–∞—Å–æ—Ç–∫–∞", year: 1990, genre: "romance", director: "–ì—ç—Ä—Ä–∏ –ú–∞—Ä—à–∞–ª–ª", rating: 7.1, format: "VHS" },
            { id: 45, title: "–ù–µ–≤–µ—Å—Ç–∞ –ø–æ –ø–µ—Ä–µ–ø–∏—Å–∫–µ", year: 1987, genre: "romance", director: "–ú–∞—Ä–∫ –ô–æ–∑–µ—Ñ", rating: 6.9, format: "VHS" },
            { id: 46, title: "–ó–∞–≤—Ç—Ä–∞–∫ —É –¢–∏—Ñ—Ñ–∞–Ω–∏", year: 1961, genre: "romance", director: "–ë–ª—ç–π–∫ –≠–¥–≤–∞—Ä–¥—Å", rating: 7.6, format: "VHS" },
            { id: 47, title: "–†–∏–º—Å–∫–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã", year: 1953, genre: "romance", director: "–£–∏–ª—å—è–º –£–∞–π–ª–µ—Ä", rating: 8.0, format: "VHS" },
            { id: 48, title: "–ö–∞—Å–∞–±–ª–∞–Ω–∫–∞", year: 1942, genre: "romance", director: "–ú–∞–π–∫–ª –ö—ë—Ä—Ç–∏—Ü", rating: 8.5, format: "VHS" },
        ];

        // –ë–∞–∑–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
        const CUSTOMER_REQUESTS = [
            {
                id: 1,
                text: "–•–æ—á—É —á—Ç–æ-—Ç–æ —Å –≤–∑—Ä—ã–≤–∞–º–∏ –∏ —ç–∫—à–µ–Ω–æ–º!",
                filters: { genre: "action" }
            },
            {
                id: 2,
                text: "–ü–æ—Å–º–µ–π—Ç–µ—Å—å –Ω–∞–¥–æ –º–Ω–æ–π —á–µ–º-–Ω–∏–±—É–¥—å —Å–º–µ—à–Ω—ã–º!",
                filters: { genre: "comedy" }
            },
            {
                id: 3,
                text: "–•–æ—á—É –≥—Ä—É—Å—Ç–∏—Ç—å –∏ –ø–ª–∞–∫–∞—Ç—å...",
                filters: { genre: "drama" }
            },
            {
                id: 4,
                text: "–ü–æ–∫–∞–∂–∏ –º–Ω–µ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞—à–Ω–æ–µ!",
                filters: { genre: "horror" }
            },
            {
                id: 5,
                text: "–•–æ—á—É –∫–æ—Å–º–æ—Å –∏ –±—É–¥—É—â–µ–µ!",
                filters: { genre: "scifi" }
            },
            {
                id: 6,
                text: "–†–æ–º–∞–Ω—Ç–∏–∫–∞, –ª—é–±–æ–≤—å, –≤—Å—ë —Ç–∞–∫–æ–µ...",
                filters: { genre: "romance" }
            },
            {
                id: 7,
                text: "–î–∞–π —á—Ç–æ-–Ω–∏–±—É–¥—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –∏–∑ 80-—Ö!",
                filters: { yearMin: 1980, yearMax: 1989 }
            },
            {
                id: 8,
                text: "–•–æ—á—É —Å—Ç–∞—Ä—É—é –∫–∞—Å—Å–µ—Ç—É VHS!",
                filters: { format: "VHS" }
            },
            {
                id: 9,
                text: "–ü–æ–∫–∞–∂–∏ —á—Ç–æ-—Ç–æ –Ω–æ–≤–µ–Ω—å–∫–æ–µ –Ω–∞ DVD!",
                filters: { format: "DVD", yearMin: 1995 }
            },
            {
                id: 10,
                text: "–•–æ—á—É –±–æ–µ–≤–∏–∫ –∏–∑ 90-—Ö!",
                filters: { genre: "action", yearMin: 1990, yearMax: 1999 }
            },
            {
                id: 11,
                text: "–î–∞–π –º–Ω–µ —Ç–æ–ø–æ–≤—ã–π —Ñ–∏–ª—å–º —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º 8+!",
                filters: { ratingMin: 8.0 }
            },
            {
                id: 12,
                text: "–ü–æ–∫–∞–∂–∏ —à–µ–¥–µ–≤—Ä —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –≤—ã—à–µ 9!",
                filters: { ratingMin: 9.0 }
            },
            {
                id: 13,
                text: "–•–æ—á—É –∫–æ–º–µ–¥–∏—é 80-—Ö –Ω–∞ VHS!",
                filters: { genre: "comedy", yearMin: 1980, yearMax: 1989, format: "VHS" }
            },
            {
                id: 14,
                text: "–î–∞–π –º–Ω–µ –¥—Ä–∞–º—É –§—Ä—ç–Ω–∫–∞ –î–∞—Ä–∞–±–æ–Ω—Ç–∞!",
                filters: { genre: "drama", director: "–§—Ä—ç–Ω–∫ –î–∞—Ä–∞–±–æ–Ω—Ç" }
            },
            {
                id: 15,
                text: "–•–æ—á—É —Å—Ç–∞—Ä—ã–π —É–∂–∞—Å—Ç–∏–∫ 70-—Ö!",
                filters: { genre: "horror", yearMin: 1970, yearMax: 1979 }
            },
        ];

        const CUSTOMER_AVATARS = ["üë®", "üë©", "üë¥", "üëµ", "üßî", "üë±‚Äç‚ôÄÔ∏è", "üßë", "üë®‚Äçü¶∞"];

        const GENRE_NAMES = {
            action: "–ë–æ–µ–≤–∏–∫",
            comedy: "–ö–æ–º–µ–¥–∏—è",
            drama: "–î—Ä–∞–º–∞",
            horror: "–•–æ—Ä—Ä–æ—Ä",
            scifi: "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞",
            romance: "–ú–µ–ª–æ–¥—Ä–∞–º–∞"
        };

        function MoviePickerGame() {
            const [gameState, setGameState] = useState("playing"); // playing, dayComplete
            const [day, setDay] = useState(1);
            const [score, setScore] = useState(0);
            const [moviesSold, setMoviesSold] = useState(0);
            const [inventory, setInventory] = useState([]);
            const [currentCustomer, setCurrentCustomer] = useState(null);
            const [selectedMovie, setSelectedMovie] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);
            const [feedbackData, setFeedbackData] = useState(null);
            const [availableMovies, setAvailableMovies] = useState([]);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            useEffect(() => {
                initializeDay();
            }, []);

            const initializeDay = () => {
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ 40 —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                const shuffled = [...MOVIES_DATABASE].sort(() => Math.random() - 0.5);
                const selected = shuffled.slice(0, 40);
                setInventory(selected);
                
                // –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–∏–ª—å–º—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏
                const remaining = shuffled.slice(40);
                setAvailableMovies(remaining);
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
                generateCustomer();
            };

            const generateCustomer = () => {
                const request = CUSTOMER_REQUESTS[Math.floor(Math.random() * CUSTOMER_REQUESTS.length)];
                const avatar = CUSTOMER_AVATARS[Math.floor(Math.random() * CUSTOMER_AVATARS.length)];
                
                setCurrentCustomer({
                    avatar,
                    request: request.text,
                    filters: request.filters
                });
            };

            const checkMovieMatch = (movie, filters) => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∂–∞–Ω—Ä
                if (filters.genre && movie.genre !== filters.genre) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ–¥ (–º–∏–Ω–∏–º—É–º)
                if (filters.yearMin && movie.year < filters.yearMin) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ–¥ (–º–∞–∫—Å–∏–º—É–º)
                if (filters.yearMax && movie.year > filters.yearMax) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç
                if (filters.format && movie.format !== filters.format) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–π—Ç–∏–Ω–≥ (–º–∏–Ω–∏–º—É–º)
                if (filters.ratingMin && movie.rating < filters.ratingMin) {
                    return false;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏—Å—Å—ë—Ä–∞
                if (filters.director && movie.director !== filters.director) {
                    return false;
                }
                
                return true;
            };

            const recommendMovie = () => {
                if (!selectedMovie || !currentCustomer) return;

                const isMatch = checkMovieMatch(selectedMovie, currentCustomer.filters);
                
                if (isMatch) {
                    // –£—Å–ø–µ—Ö!
                    setScore(score + 1);
                    setMoviesSold(moviesSold + 1);
                    setFeedbackData({
                        success: true,
                        message: "–û—Ç–ª–∏—á–Ω–æ! –≠—Ç–æ —Ç–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ!",
                        icon: "üéâ"
                    });
                    
                    // –£–±–∏—Ä–∞–µ–º —Ñ–∏–ª—å–º –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                    setInventory(inventory.filter(m => m.id !== selectedMovie.id));
                } else {
                    // –ù–µ—É–¥–∞—á–∞
                    setFeedbackData({
                        success: false,
                        message: "–ù–µ—Ç, —ç—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ —è –∏—Å–∫–∞–ª...",
                        icon: "üòû"
                    });
                }
                
                setShowFeedback(true);
                setSelectedMovie(null);
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–∏–¥–±–µ–∫ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
                setTimeout(() => {
                    setShowFeedback(false);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ–¥–∞–ª–∏ –ª–∏ 20 —Ñ–∏–ª—å–º–æ–≤
                    if (isMatch && moviesSold + 1 >= 20) {
                        setGameState("dayComplete");
                    } else {
                        generateCustomer();
                    }
                }, 2000);
            };

            const purchaseMovies = (selectedMovies) => {
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                const newInventory = [...selectedMovies];
                setInventory(newInventory);
                
                // –£–±–∏—Ä–∞–µ–º –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                const newAvailable = availableMovies.filter(
                    m => !selectedMovies.find(sm => sm.id === m.id)
                );
                setAvailableMovies(newAvailable);
                
                // –ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π –¥–µ–Ω—å
                setDay(day + 1);
                setMoviesSold(0);
                setGameState("playing");
                generateCustomer();
            };

            return (
                <div className="game-container">
                    <div className="header">
                        <h1>üé¨ –ü–û–î–ë–û–†–©–ò–ö –§–ò–õ–¨–ú–û–í üé¨</h1>
                        <div className="stats">
                            <div className="stat-box">
                                <div className="stat-label">–î–µ–Ω—å</div>
                                <div className="stat-value">{day}</div>
                            </div>
                            <div className="stat-box">
                                <div className="stat-label">–°—á—ë—Ç</div>
                                <div className="stat-value">{score}</div>
                            </div>
                            <div className="stat-box">
                                <div className="stat-label">–ü—Ä–æ–¥–∞–Ω–æ</div>
                                <div className="stat-value">{moviesSold}/20</div>
                            </div>
                            <div className="stat-box">
                                <div className="stat-label">–í –Ω–∞–ª–∏—á–∏–∏</div>
                                <div className="stat-value">{inventory.length}</div>
                            </div>
                        </div>
                    </div>

                    {gameState === "playing" && (
                        <div className="game-area">
                            <div className="customer-panel">
                                <h2 style={{marginBottom: '20px', color: '#ffd700'}}>üë• –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å</h2>
                                {currentCustomer && (
                                    <div className="customer">
                                        <div className="customer-avatar">{currentCustomer.avatar}</div>
                                        <div className="customer-request">
                                            "{currentCustomer.request}"
                                        </div>
                                    </div>
                                )}
                            </div>

                            <div className="shelves-area">
                                <h2 style={{color: '#ffd700'}}>üìº –°—Ç–µ–ª–ª–∞–∂ —Å —Ñ–∏–ª—å–º–∞–º–∏</h2>
                                
                                <div className="legend">
                                    <div className="legend-item">
                                        <div className="legend-color genre-action"></div>
                                        <span>–ë–æ–µ–≤–∏–∫</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-color genre-comedy"></div>
                                        <span>–ö–æ–º–µ–¥–∏—è</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-color genre-drama"></div>
                                        <span>–î—Ä–∞–º–∞</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-color genre-horror"></div>
                                        <span>–•–æ—Ä—Ä–æ—Ä</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-color genre-scifi"></div>
                                        <span>–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</span>
                                    </div>
                                    <div className="legend-item">
                                        <div className="legend-color genre-romance"></div>
                                        <span>–ú–µ–ª–æ–¥—Ä–∞–º–∞</span>
                                    </div>
                                </div>

                                <div className="shelves">
                                    {inventory.map((movie) => (
                                        <div
                                            key={movie.id}
                                            className={`movie-spine genre-${movie.genre} ${selectedMovie?.id === movie.id ? 'selected' : ''}`}
                                            onClick={() => setSelectedMovie(movie)}
                                        >
                                            <div className="spine-label">
                                                {movie.format}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {gameState === "dayComplete" && (
                        <DayCompleteScreen
                            day={day}
                            score={score}
                            availableMovies={availableMovies}
                            onPurchase={purchaseMovies}
                        />
                    )}

                    {selectedMovie && gameState === "playing" && (
                        <>
                            <div className="modal-overlay" onClick={() => setSelectedMovie(null)}></div>
                            <div className="movie-info-modal">
                                <h2 className="movie-title">{selectedMovie.title}</h2>
                                <div className="movie-details">
                                    <div className="movie-detail-row">
                                        <span className="detail-label">–ì–æ–¥:</span>
                                        {selectedMovie.year}
                                    </div>
                                    <div className="movie-detail-row">
                                        <span className="detail-label">–ñ–∞–Ω—Ä:</span>
                                        {GENRE_NAMES[selectedMovie.genre]}
                                    </div>
                                    <div className="movie-detail-row">
                                        <span className="detail-label">–†–µ–∂–∏—Å—Å—ë—Ä:</span>
                                        {selectedMovie.director}
                                    </div>
                                    <div className="movie-detail-row">
                                        <span className="detail-label">–†–µ–π—Ç–∏–Ω–≥:</span>
                                        ‚≠ê {selectedMovie.rating}
                                    </div>
                                    <div className="movie-detail-row">
                                        <span className="detail-label">–§–æ—Ä–º–∞—Ç:</span>
                                        {selectedMovie.format}
                                    </div>
                                </div>
                                <div className="button-group">
                                    <button className="btn btn-recommend" onClick={recommendMovie}>
                                        ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—é
                                    </button>
                                    <button className="btn btn-close" onClick={() => setSelectedMovie(null)}>
                                        ‚ùå –ó–∞–∫—Ä—ã—Ç—å
                                    </button>
                                </div>
                            </div>
                        </>
                    )}

                    {showFeedback && feedbackData && (
                        <>
                            <div className="modal-overlay"></div>
                            <div className={`feedback-modal ${feedbackData.success ? 'pulse' : 'shake'}`}>
                                <div className="feedback-icon">{feedbackData.icon}</div>
                                <div className="feedback-text">{feedbackData.message}</div>
                                {feedbackData.success && (
                                    <div style={{color: '#32cd32', fontSize: '1.2em', marginTop: '10px'}}>
                                        +1 –±–∞–ª–ª!
                                    </div>
                                )}
                            </div>
                        </>
                    )}
                </div>
            );
        }

        function DayCompleteScreen({ day, score, availableMovies, onPurchase }) {
            const [selectedMovies, setSelectedMovies] = useState([]);
            const maxPurchase = 40;

            const toggleMovie = (movie) => {
                if (selectedMovies.find(m => m.id === movie.id)) {
                    setSelectedMovies(selectedMovies.filter(m => m.id !== movie.id));
                } else {
                    if (selectedMovies.length < maxPurchase) {
                        setSelectedMovies([...selectedMovies, movie]);
                    }
                }
            };

            const handleContinue = () => {
                if (selectedMovies.length === maxPurchase) {
                    onPurchase(selectedMovies);
                }
            };

            return (
                <>
                    <div className="modal-overlay"></div>
                    <div className="day-complete-modal">
                        <h1 className="day-complete-title">üåü –î–µ–Ω—å {day} –∑–∞–≤–µ—Ä—à—ë–Ω! üåü</h1>
                        <div style={{fontSize: '1.5em', marginBottom: '20px', color: '#32cd32'}}>
                            –í–∞—à —Å—á—ë—Ç: {score} –±–∞–ª–ª–æ–≤
                        </div>
                        <div style={{fontSize: '1.2em', marginBottom: '30px'}}>
                            –í—Ä–µ–º—è –ø–æ–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø–∞—Å—ã! –í—ã–±–µ—Ä–∏—Ç–µ 40 —Ñ–∏–ª—å–º–æ–≤ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–Ω—è:
                        </div>

                        <div className="purchase-area">
                            <div style={{marginBottom: '15px', fontSize: '1.1em', color: '#ffd700'}}>
                                –í—ã–±—Ä–∞–Ω–æ: {selectedMovies.length} / {maxPurchase}
                            </div>
                            <div className="purchase-movies">
                                {availableMovies.map((movie) => (
                                    <div
                                        key={movie.id}
                                        className={`purchase-movie ${selectedMovies.find(m => m.id === movie.id) ? 'selected' : ''}`}
                                        onClick={() => toggleMovie(movie)}
                                    >
                                        <div className="purchase-movie-title">{movie.title}</div>
                                        <div className="purchase-movie-info">
                                            {movie.year} ‚Ä¢ {GENRE_NAMES[movie.genre]}
                                        </div>
                                        <div className="purchase-movie-info">
                                            {movie.format} ‚Ä¢ ‚≠ê {movie.rating}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <button
                            className="btn btn-recommend"
                            style={{marginTop: '30px', width: '100%', fontSize: '1.3em'}}
                            onClick={handleContinue}
                            disabled={selectedMovies.length !== maxPurchase}
                        >
                            {selectedMovies.length === maxPurchase 
                                ? 'üé¨ –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–µ–Ω—å!' 
                                : `–í—ã–±–µ—Ä–∏—Ç–µ –µ—â—ë ${maxPurchase - selectedMovies.length} —Ñ–∏–ª—å–º–æ–≤`}
                        </button>
                    </div>
                </>
            );
        }

        ReactDOM.render(<MoviePickerGame />, document.getElementById('root'));
    </script>
</body>
</html>